@using ExceptionSolutionProject.ApiResponse
@model List<UserResponse>

<!--  BEGIN CONTENT AREA  -->
<div id="content" class="main-content">
    <div class="layout-px-spacing">
        <div class="page-header">
            <div class="page-title">
                <h3>Kullanıcı Arama</h3>
            </div>
            <input type="text" id="searchInput" placeholder="İsim veya Kullanıcı Adına Göre Ara" class="form-control mt-3" />
        </div>

        <div class="row" id="cancel-row">
            <div class="col-xl-12 col-lg-12 col-sm-12 layout-spacing">
                <div class="widget-content widget-content-area br-6">
                    <div class="table-responsive mb-4 mt-4">
                        <table id="multi-column-ordering" class="table table-hover" style="width:100%">
                            <thead>
                                <tr>
                                    <th>Specialty</th>
                                    <th>Kullanıcı Adı</th>
                                    <th>Telefonlar</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            <div class="d-flex">
                                                    <a asp-action="SendMessage" asp-route-UserId="@item.UserId" class="align-self-center mb-0 admin-name">@item.Name</a>
                                            </div>
                                        </td>
                                        <td>@item.UserName</td>
                                        <td>@item.Phones</td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th>İsim</th>
                                    <th>Kullanıcı Adı</th>
                                    <th>Telefonlar</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<!--  END CONTENT AREA  -->

@section UserSearchScripts {
    <script src="~/main/assets/js/libs/jquery-3.1.1.min.js"></script>
    <script src="~/main/bootstrap/js/popper.min.js"></script>
    <script src="~/main/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/main/plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="~/main/assets/js/app.js"></script>

    <script>
        $(document).ready(function() {
            App.init();

            // Tüm tabloyu gizle
            $('#multi-column-ordering tbody').hide();

            // Arama fonksiyonu
            $('#searchInput').on('input', function() {
                var searchValue = $(this).val().toLowerCase();
                var hasMatches = false;

                $('#multi-column-ordering tbody tr').each(function() {
                    var nameMatch = $(this).find('td').eq(0).text().toLowerCase().indexOf(searchValue) > -1;
                    var userNameMatch = $(this).find('td').eq(1).text().toLowerCase().indexOf(searchValue) > -1;

                    $(this).toggle(nameMatch || userNameMatch);

                    if (nameMatch || userNameMatch) {
                        hasMatches = true;
                    }
                });

                if (searchValue === "" || !hasMatches) {
                    $('#multi-column-ordering tbody').hide();
                } else {
                    $('#multi-column-ordering tbody').show();
                }
            });
        });
    </script>

    <script src="~/main/assets/js/custom.js"></script>
    <script src="~/main/plugins/table/datatable/datatables.js"></script>
@*     <script>
        $('#multi-column-ordering').DataTable({
            "oLanguage": {
                "oPaginate": {
                    "sPrevious": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',
                    "sNext": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>'
                },
                "sInfo": "Sayfa _PAGE_ / _PAGES_",
                "sSearch": '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',
                "sSearchPlaceholder": "Ara...",
                "sLengthMenu": "Sonuçlar:  _MENU_",
            },
            "stripeClasses": [],
            "lengthMenu": [7, 10, 20, 50],
            "pageLength": 7
        });
    </script> *@
}
