@{
    ViewData["Title"] = "Index";
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Player</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Arial', sans-serif;
        }

        .container {
            max-width: 600px; /* Limit container width */
            margin: auto; /* Center the container */
        }

        .carousel {
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
        }

            .carousel img {
                border-radius: 10px;
                max-width: 100%; /* Make images responsive */
                height: auto; /* Maintain aspect ratio */
            }

        .controls {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

            .controls button {
                margin: 0 10px;
                padding: 10px 15px;
                border-radius: 5px;
                transition: background-color 0.3s;
            }

                .controls button:hover {
                    background-color: #0056b3;
                    color: white;
                }

        .range-indicator {
            background-color: #007bff;
            height: 5px;
            transition: width 0.1s;
            border-radius: 5px;
        }

        #tracktime {
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
        }

        .playlist {
            overflow: hidden;
            transition: height 0.3s;
            height: 0;
            border: 1px solid #007bff;
            border-radius: 5px;
            padding: 0 10px;
            background-color: #fff;
        }

            .playlist h5 {
                margin: 10px 0;
            }

        .list-group-item {
            transition: background-color 0.3s;
        }

            .list-group-item:hover {
                background-color: #e9ecef;
                cursor: pointer;
            }

        .active {
            background-color: #007bff !important;
            color: white !important;
        }

        .song-info {
            text-align: center;
            margin-bottom: 20px;
        }

            .song-info h5 {
                margin: 0;
                font-size: 1.2em;
            }
    </style>
</head>
<body>

    <div class="container">
        <div class="carousel slide" id="carouselExample" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://via.placeholder.com/300x200?text=Album+1" class="d-block w-100" alt="Album 1">
                </div>
                <div class="carousel-item">
                    <img src="https://via.placeholder.com/300x200?text=Album+2" class="d-block w-100" alt="Album 2">
                </div>
                <div class="carousel-item">
                    <img src="https://via.placeholder.com/300x200?text=Album+3" class="d-block w-100" alt="Album 3">
                </div>
            </div>
        </div>

        <div class="song-info">
            <h5 id="songName">Song Title</h5>
            <h5 class="artist-name">Artist Name</h5>
        </div>

        <audio controls style="visibility:hidden">
            <source src="" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>

        <div class="controls">
            <button id="prev" class="btn btn-primary"><i class="fas fa-backward"></i></button>
            <button id="play-pause" value="1" class="btn btn-primary"><i class="fa fa-play"></i></button>
            <button id="next" class="btn btn-primary"><i class="fas fa-forward"></i></button>
        </div>

        <div id="tracktime">00:00 / 00:00</div>
        <div class="range-indicator"></div>
        <input type="range" id="inputrange" value="0" style="width:100%; margin-top:10px;">

        <div class="playlist">
            <h5>Playlist</h5>
            <ul class="list-group">
                <li class="list-group-item" value="0">Closer - The Chainsmokers ft. Halsey</li>
                <li class="list-group-item" value="1">Shape Of You - Ed Sheeran</li>
                <li class="list-group-item" value="2">Unmistakable - Backstreet Boys</li>
            </ul>
            <button id="playlist-btn" class="btn btn-secondary">Toggle Playlist</button>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            var i = 0;

            var Playlist = [
                {
                    Artist: "The Chainsmokers ft. Halsey",
                    Song: "Closer",
                    Album: "Collage",
                    Src: "https://ncs-files-1.nyc3.digitaloceanspaces.com/mp3s/Unison-Aperture.mp3"
                },
                {
                    Artist: "Ed Sheeran",
                    Song: "Shape Of You",
                    Album: "Divide",
                    Src: "https://ncs-files-1.nyc3.digitaloceanspaces.com/mp3s/Waysons%20-%20Eternal%20Minds.mp3"
                },
                {
                    Artist: "Backstreet Boys",
                    Song: "Unmistakable",
                    Album: "Unbreakable",
                    Src: "https://ncs-files-1.nyc3.digitaloceanspaces.com/mp3s/High%20Maintenance%20-%20Change%20Your%20Ways%20%28feat.%20Charlotte%20Haining%29.mp3"
                }
            ];

            var audio = $("audio").get(0);
            var $playPauseButton = $("#play-pause");

            // Initialize the first song
            updateSong(i);

            // Carousel settings
            $(".carousel").carousel({ interval: false });

            // Load audio and set up event listeners
            audio.load();

            // Play/Pause functionality
            $playPauseButton.on("click", function() {
                if (audio.paused) {
                    audio.play();
                    $playPauseButton.html("<i style='color:#007bff' class='fa fa-pause'></i>");
                    $(".range-indicator").removeClass("range-indicator-pause");
                } else {
                    audio.pause();
                    $playPauseButton.html("<i class='fa fa-play'></i>");
                    $(".range-indicator").addClass("range-indicator-pause");
                }
            });

            // Next and Previous functionality
            $("#next").on("click", function() {
                i = (i + 1) % Playlist.length; // Cycle through the playlist
                updateSong(i);
            });

            $("#prev").on("click", function() {
                i = (i - 1 + Playlist.length) % Playlist.length; // Cycle backwards
                updateSong(i);
            });

            // Update track time and range indicator
            audio.addEventListener("timeupdate", function() {
                var currentTime = this.currentTime;
                var duration = this.duration;

                // Update time display
                $("#tracktime").html(formatTime(currentTime) + " / " + formatTime(duration));

                // Update range indicator
                if (duration > 0) {
                    var percent = (currentTime / duration) * 100;
                    $(".range-indicator").css("width", percent + "%");
                    $("#inputrange").val(percent);
                }

                // Go to next song when current time ends
                if (currentTime >= duration) {
                    $("#next").trigger("click");
                }
            });

            // Load duration when audio metadata is available
            audio.addEventListener("loadedmetadata", function() {
                $("#inputrange").attr("max", 100); // Set max to 100% for range input
            });

            // Update audio current time based on range input
            $("#inputrange").on("input", function() {
                audio.currentTime = this.value * audio.duration / 100;
            });

            // Play song from playlist
            $(".list-group-item").on("click", function() {
                var value = $(this).index(); // Use index for item selection
                i = value;
                updateSong(i);
            });

            // Toggle playlist visibility
            $("#playlist-btn").on("click", function() {
                var playlist = $(".playlist");
                if (playlist.css("height") === "0px") {
                    playlist.css("height", "auto");
                    playlist.animate({ height: "300px" }, 300); // Animate to full height
                } else {
                    playlist.animate({ height: "0px" }, 300); // Animate to hidden
                }
            });

            // Function to update song info and load audio
            function updateSong(index) {
                audio.src = Playlist[index].Src;
                $("#songName").text(Playlist[index].Song); // Update song title
                $(".artist-name").text(Playlist[index].Artist); // Update artist name
                audio.load();
                audio.play(); // Automatically play the new song
                $playPauseButton.html("<i style='color:#007bff' class='fa fa-pause'></i>");
                $(".range-indicator").removeClass("range-indicator-pause");
            }

            // Format time for display
            function formatTime(seconds) {
                var minutes = Math.floor(seconds / 60);
                var seconds = Math.floor(seconds % 60);
                return (minutes < 10 ? "0" : "") + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;
            }
        });
    </script>
</body>
</html>
